<!DOCTYPE html>
<html data-wf-domain="educare-template.webflow.io" data-wf-page="5ec048a712515a347b5ea033"
    data-wf-site="5ec03c2c67cf4824e3d00674" data-wf-status="1">

<head>
    <meta charset="utf-8" />
    <title><%= assignments.assignmentName %></title>
    <meta content="Use Interactions to create an animation on the hero section." name="description" />
    <meta content="Add a page load animation" property="og:title" />
    <meta content="Use Interactions to create an animation on the hero section." property="og:description" />
    <meta content="Add a page load animation" property="twitter:title" />
    <meta content="Use Interactions to create an animation on the hero section." property="twitter:description" />
    <meta property="og:type" content="website" />
    <meta content="summary_large_image" name="twitter:card" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="Webflow" name="generator" />
    <link
        href="https://assets-global.website-files.com/5ec03c2c67cf4824e3d00674/css/educare-template.webflow.88d89e5a0.css"
        rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous" />
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
    <script
        type="text/javascript">WebFont.load({ google: { families: ["Lato:100,100italic,300,300italic,400,400italic,700,700italic,900,900italic", "Noto Sans:regular,700"] } });</script>
    <script
        type="text/javascript">!function (o, c) { var n = c.documentElement, t = " w-mod-"; n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch") }(window, document);</script>
    <link
        href="https://assets-global.website-files.com/5ec03c2c67cf4824e3d00674/5ec4a16f1b60fb8807e57fed_educare-favicon.png"
        rel="shortcut icon" type="image/x-icon" />
    <link
        href="https://assets-global.website-files.com/5ec03c2c67cf4824e3d00674/5ec4a17399142f1f9bb32d44_educare_webclip.png"
        rel="apple-touch-icon" />
</head>

<body>
    <div class="page-wrap">
        <div class="sticky-nav">
            <div data-collapse="medium" data-animation="default" data-duration="400" data-easing="ease"
                data-easing2="ease" role="banner" class="sidebar w-nav">
                <div class="nav-container w-container"><a href="/" class="brand w-nav-brand"><img
                            src="https://assets-global.website-files.com/5ec03c2c67cf4824e3d00674/5ec06fdd3f372549fb221453_Educare.svg"
                            alt="" class="logo" /></a>
                    <nav role="navigation" class="nav-menu w-nav-menu"><a href="/" class="navlink w-inline-block"><img
                                src="https://assets-global.website-files.com/5ec03c2c67cf4824e3d00674/5ec06fd41b451117a43bf866_Home.svg"
                                width="22" alt="" class="icon" />
                            <div>Home</div>
                        </a><a href="/lessons" class="navlink w-inline-block"><img
                                src="https://assets-global.website-files.com/5ec03c2c67cf4824e3d00674/5ec16d200962178631a23d61_Document.svg"
                                width="22" alt="" class="icon" />
                            <div>Lessons</div>
                        </a><a href="/assignments" class="navlink w-inline-block"><img
                                src="https://assets-global.website-files.com/5ec03c2c67cf4824e3d00674/5ec0767df6793ec663e7022f_Calendar.svg"
                                width="22" alt="" class="icon" />
                            <div>Assignments</div>
                        </a><a href="/news" class="navlink w-inline-block"><img
                                src="https://assets-global.website-files.com/5ec03c2c67cf4824e3d00674/5ec16f2bf2396c56c2e0b35d_Discovery.svg"
                                width="22" alt="" class="icon" />
                            <div>News</div>
                        </a><a href="/contact" class="navlink w-inline-block"><img
                                src="https://assets-global.website-files.com/5ec03c2c67cf4824e3d00674/5ec0768dab934f65d1afd7c8_Message.svg"
                                width="22" alt="" class="icon" />
                            <div>Ask a question</div>
                        </a>
                        <div id="login-status" class="navlink w-inline-block">
                            <div id="user-email"></div>
                        </div>
                        <div id="login-status" class="navlink w-inline-block">
                            <div id="login-logout-btn" onclick="toggleLogin()">
                                <div id="login-logout-text">Login</div>
                            </div>
                        </div></nav>
                    <div class="menu-button w-nav-button">
                        <div class="menu-icon w-icon-nav-menu"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="content-wrap">
            <div class="search">
                <form action="/search" data-w-id="7096e4cb-57fe-326d-4ae3-dbe8cd2e499f" class="search-component w-form">
                    <input type="search" class="search-input w-input" maxlength="256" name="query" placeholder="Search…"
                        data-w-id="7096e4cb-57fe-326d-4ae3-dbe8cd2e49a0" id="search" required="" /><input type="submit"
                        value="" class="search-button w-button" /></form>
                <div data-w-id="7096e4cb-57fe-326d-4ae3-dbe8cd2e49a2" class="search-icon"><img
                        src="https://assets-global.website-files.com/5ec03c2c67cf4824e3d00674/5ec33212c833f9fa37d83599_search.svg"
                        width="71.5" alt="" data-w-id="7096e4cb-57fe-326d-4ae3-dbe8cd2e49a3"
                        class="search-icon-open" /><img
                        src="https://assets-global.website-files.com/5ec03c2c67cf4824e3d00674/5ec488848143fd33542ab867_close.svg"
                        width="22" alt="" data-w-id="7096e4cb-57fe-326d-4ae3-dbe8cd2e49a4" class="search-icon-close" />
                </div>
            </div>
            <div class="section">
            <h1>
                <%= assignments.assignmentName %>
            </h1>
            <div class="due-date">
                <div>Due date:</div>
                <p class="date assignment"><%= formatDateTime(assignments.deadline) %></p>
                <% function formatDateTime(dateTime) { %>
                    <% const utcDateTime=new Date(dateTime); %>
                        <% utcDateTime.setHours(utcDateTime.getHours()); %>
                            <% const
                                formattedDateTime=utcDateTime.toLocaleString('vi-VN');
                                %>
                                <%= formattedDateTime %>
                                    <% } %>
            </div>
            </div>
            
            <div class="content-grid">
                <div class="content">
                    <div>
                        <div class="section-title">Assignment</div>
                        <div class="card extra-padding w-richtext">
                            <h2><%= assignments.content %></h2>
                        </div>
                    </div>
                </div>
                <div class="right-sidebar_wrapper">
                    <div class="sticky-sidebar">
                            <div class="section-title">Bài tập</div>
                        <div class="card right-sidebar">
                            <div class="card right-sidebar">
                    <% const pathArray=assignments.documentPath.replace(/\\/g, '/' ).split('/'); %>
                        <a href="/download?pathname=<%= encodeURIComponent(pathArray.slice(0, -1).join('/')) %>&filename=<%= encodeURIComponent(pathArray.slice(-1)[0]) %>"
                            class="assets-link w-inline-block" download>
                            <img
                                    src="https://assets-global.website-files.com/5ec03c2c67cf4824e3d00674/5ec436df818db6973c9cbe96_Download.svg"
                                    alt="" class="icon" />
                            <div>
                                <%= getFileName(assignments.documentPath) %>
                            </div>

                            </div>
                            <% function getFileName(filePath) { %>
                                <% const pathArray = filePath.split("\\"); %>
                                <% const fileName = pathArray[pathArray.length - 1]; %>
                                <% return fileName; %>
                            <% } %>
                            
                        </div>
                        <div>
                            <form action="/assignments/detail/submit/<%= submissions.submissionID %>" method="post" enctype="multipart/form-data">
                                <input type="file" name="submit-doc" id="submit-doc" accept=".docx, .pdf" required>
                            
                                <br style="margin-top: 10px;">
                                <input type="hidden" name="submissionID" id="submissionID" value="<%= submissions.submissionID %>" required>
                                <input type="hidden" name="courseID" id="courseID" value="<%= assignments.courseID %>" required>   
                                <input type="hidden" name="ngay_nop" id="ngay_nop" value="<%= submissions.ngay_nop || '' %>" required>
                                <!-- ^^^ Thêm điều kiện để ngay_nop không phải null -->
                            
                                <div><br></div>
                                    <button type="submit" class="button w-button">Chỉnh sửa bài tập</button>
                            </form>
      
                        </div>
                        <div class="section-title top-margin">Related lessonS</div>
                        <div class="w-dyn-list">
                            <div role="list" class="w-dyn-items">
                                <div role="listitem" class="w-dyn-item">
                                    <div class="card right-sidebar">
                                        <h1 class="card-title small">Danh sách sinh viên</h1>
                                        <% for (let i=0; i < submissionStudent.length; i++) { %>
                                        <a href="/category/interactions" class="category-link w-inline-block">
                                            <div class="category">Đã nộp bài</div>
                                        </a><a href="/author/jerod-macejkovic"
                                            class="author-info lower-margin w-inline-block"><img alt=""
                                                src="https://assets-global.website-files.com/5ec0480d4930cd200885acbd/5ec2f382879ec946c4fd75bd_juan-encalada-WC7KIHo13Fc-unsplash.jpg"
                                                sizes="30.000001907348633px"
                                                srcset="https://assets-global.website-files.com/5ec0480d4930cd200885acbd/5ec2f382879ec946c4fd75bd_juan-encalada-WC7KIHo13Fc-unsplash-p-500.jpeg 500w, https://assets-global.website-files.com/5ec0480d4930cd200885acbd/5ec2f382879ec946c4fd75bd_juan-encalada-WC7KIHo13Fc-unsplash-p-800.jpeg 800w, https://assets-global.website-files.com/5ec0480d4930cd200885acbd/5ec2f382879ec946c4fd75bd_juan-encalada-WC7KIHo13Fc-unsplash.jpg 1000w"
                                                class="avatar" />
                                            <div class="author-name"><%= submissionStudent[i].email %></div>
                                        </a>
                                        <% } %>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
            <div class="footer">
                    <div>Powered by Webflow</div>
                </a><a id="w-node-fc126ed8-ceec-18e5-095a-fbeb36a49880-36a4987b" href="/template-info/licensing"
                    class="footer-link right w-inline-block">
                    <div>Licensing Info</div>
                </a></div>
        </div>
    </div>
    <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=5ec03c2c67cf4824e3d00674"
        type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous"></script>
    <script src="js/script.js"
        type="text/javascript"></script>
        <script src="https://cdn.jsdelivr.net/npm/date-fns@2.28.0"></script>
    <script>
        const deadline = "<%= assignments.deadline %>";
        const formattedDueDate = format(new Date(deadline), "EEEE, dd/MM/yyyy", { locale: vi });
        document.getElementById('dueDate').innerText = formattedDueDate;
    </script>
    <script>
        document.getElementById('ngay_nop').value = new Date().toISOString();
    </script>

    <script>

        function getFileName(filePath) {
            const pathArray = filePath.split("\\");
            return pathArray[pathArray.length - 1];
        }

        function toggleLogin() {
            $.ajax({
                url: '/check-login',
                method: 'GET',
                success: function (data) {
                    if (data.loggedIn) {
                        handleLogout();
                    } else {
                        window.location.href = '/login';
                    }
                },
                error: function () {
                    console.error('Error checking login status');
                }
            });
        }

        function handleLogout() {
            $.ajax({
                url: '/logout',
                method: 'POST',
                success: function (data) {
                    if (data.success) {
                        location.reload();
                    }
                },
                error: function () {
                    console.error('Error logging out');
                }
            });
        }

        $(document).ready(function () {
            $.ajax({
                url: '/check-login',
                method: 'GET',
                success: function (data) {
                    if (data.loggedIn) {
                        $('#user-email').html(data.userEmail);
                        $('#login-logout-text').html('Logout');
                    } else {
                        $('#user-email').html('');
                        $('#login-logout-text').html('Login');
                    }
                },
                error: function () {
                    console.error('Error checking login status');
                }
            });
        });
    </script>
</body>

</html>